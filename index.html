<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ìì‚° ë¹„ì¤‘ ì§„ë‹¨ Â· í¬íŠ¸í´ë¦¬ì˜¤ íƒ€ì…</title>

    <!-- Favicon: ìë™ ìƒì„±(SVG data URI) -->
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A//www.w3.org/2000/svg'%20viewBox%3D'0%200%20100%20100'%3E%3Crect%20width%3D'100'%20height%3D'100'%20rx%3D'22'%20fill%3D'%230b1220'/%3E%3Ctext%20x%3D'50'%20y%3D'63'%20font-size%3D'52'%20text-anchor%3D'middle'%3E%F0%9F%93%8A%3C/text%3E%3C/svg%3E"
    />

    <!-- OG -->
    <meta property="og:title" content="Asset Allocation Check" />
    <meta
      property="og:description"
      content="í˜„ê¸ˆÂ·ê¸ˆÂ·ë¶€ë™ì‚°Â·ì£¼ì‹Â·ì½”ì¸ ë¹„ì¤‘ì„ í•œëˆˆì— ë³´ê³ , ê°€ë³ê²Œ í¬íŠ¸í´ë¦¬ì˜¤ íƒ€ì…ì„ ì§„ë‹¨í•©ë‹ˆë‹¤."
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0b1220/ffffff&text=Asset%20Allocation%20Check"
    />

    <!-- Google AdSense (ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ë§Œ) -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1204894220949193"
      crossorigin="anonymous"
    ></script>

    <style>
      :root {
        --bg: #0b1220;
        --card: #121b2f;
        --card2: #0f172a;
        --text: #e7eefc;
        --muted: #a9b6d3;
        --line: rgba(255, 255, 255, 0.08);
        --good: #48d597;
        --warn: #ffcc66;
        --bad: #ff6b6b;
        --accent: #7aa7ff;
        --shadow: 0 12px 35px rgba(0, 0, 0, 0.35);
        --radius: 18px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system,
          "Apple SD Gothic Neo", "Noto Sans KR", Segoe UI, Roboto, Arial;
        background: radial-gradient(
            1200px 600px at 30% -10%,
            rgba(122, 167, 255, 0.22),
            transparent 60%
          ),
          radial-gradient(
            900px 500px at 90% 10%,
            rgba(72, 213, 151, 0.14),
            transparent 55%
          ),
          var(--bg);
        color: var(--text);
      }
      a {
        color: inherit;
      }
      .wrap {
        max-width: 1100px;
        margin: 16px auto;
        padding: 28px 18px 64px;
      }
      header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 18px;
      }
      .brand {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .logo {
        width: 44px;
        height: 44px;
        border-radius: 14px;
        background: linear-gradient(
          135deg,
          rgba(122, 167, 255, 0.25),
          rgba(72, 213, 151, 0.18)
        );
        display: grid;
        place-items: center;
        box-shadow: var(--shadow);
        border: 1px solid var(--line);
      }
      .logo span {
        font-size: 22px;
      }
      h1 {
        font-size: 22px;
        margin: 0 0 6px;
        letter-spacing: -0.2px;
      }
      .sub {
        margin: 0;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.35;
      }
      .top-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .btn {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 14px;
        cursor: pointer;
        font-weight: 650;
        letter-spacing: -0.1px;
        transition: transform 0.08s ease, background 0.2s ease;
        display: inline-flex;
        gap: 8px;
        align-items: center;
        user-select: none;
      }
      .btn:hover {
        background: rgba(255, 255, 255, 0.07);
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn.primary {
        background: linear-gradient(
          135deg,
          rgba(122, 167, 255, 0.24),
          rgba(122, 167, 255, 0.1)
        );
        border-color: rgba(122, 167, 255, 0.25);
      }
      .btn.good {
        background: linear-gradient(
          135deg,
          rgba(72, 213, 151, 0.22),
          rgba(72, 213, 151, 0.08)
        );
        border-color: rgba(72, 213, 151, 0.25);
      }
      .grid {
        display: grid;
        grid-template-columns: 420px 1fr;
        gap: 14px;
        align-items: start;
      }
      @media (max-width: 980px) {
        .grid {
          grid-template-columns: 1fr;
        }
        .top-actions {
          justify-content: flex-start;
        }
      }
      .panel {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .panel .hd {
        padding: 14px 16px;
        background: rgba(255, 255, 255, 0.02);
        border-bottom: 1px solid var(--line);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .panel .hd strong {
        font-size: 14px;
        letter-spacing: -0.1px;
      }
      .panel .bd {
        padding: 14px 16px;
      }
      .field {
        display: grid;
        grid-template-columns: 1fr 160px;
        gap: 10px;
        align-items: center;
        margin-bottom: 10px;
      }
      .field label {
        font-size: 13px;
        color: var(--muted);
      }
      input[type="number"] {
        width: 100%;
        padding: 10px 12px;
        border-radius: 14px;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.15);
        color: var(--text);
        outline: none;
        font-weight: 650;
      }
      input[type="number"]::placeholder {
        color: rgba(231, 238, 252, 0.35);
      }
      .row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .chip {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        padding: 9px 10px;
        border-radius: 999px;
        font-size: 12px;
        color: var(--muted);
        display: inline-flex;
        gap: 8px;
        align-items: center;
        cursor: pointer;
        user-select: none;
      }
      .chip input {
        accent-color: var(--accent);
      }
      .note {
        margin-top: 10px;
        color: var(--muted);
        font-size: 12px;
        line-height: 1.35;
      }

      /* Result side */
      .summary {
        display: grid;
        gap: 14px;
      }
      .summary-top {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 14px;
      }
      @media (max-width: 700px) {
        .summary-top {
          grid-template-columns: 1fr;
        }
      }
      .card {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 16px;
      }
      .kpi-title {
        color: var(--muted);
        font-size: 12px;
        margin-bottom: 8px;
      }
      .kpi-value {
        font-size: 26px;
        font-weight: 850;
        letter-spacing: -0.6px;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.12);
        font-weight: 850;
        margin-top: 10px;
        letter-spacing: -0.2px;
      }
      .badge small {
        font-weight: 750;
        color: var(--muted);
      }
      .asset-cards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
      }
      @media (max-width: 900px) {
        .asset-cards {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (max-width: 520px) {
        .asset-cards {
          grid-template-columns: 1fr;
        }
      }
      .asset {
        padding: 14px;
        border-radius: 16px;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.12);
      }
      .asset .t {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 8px;
      }
      .asset .name {
        font-weight: 850;
        letter-spacing: -0.2px;
      }
      .asset .pct {
        font-weight: 900;
      }
      .asset .amt {
        color: var(--muted);
        font-size: 12px;
        margin-top: 6px;
      }
      .bars {
        margin-top: 10px;
        display: grid;
        gap: 8px;
      }
      .bar {
        display: grid;
        grid-template-columns: 92px 1fr 62px;
        gap: 10px;
        align-items: center;
        font-size: 12px;
        color: var(--muted);
      }
      .track {
        height: 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.06);
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }
      .fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(
          90deg,
          rgba(122, 167, 255, 0.85),
          rgba(72, 213, 151, 0.75)
        );
        border-radius: 999px;
        transition: width 0.6s ease;
      }

      .diag-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin-top: 14px;
      }
      @media (max-width: 900px) {
        .diag-grid {
          grid-template-columns: 1fr;
        }
      }
      .diag {
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.12);
        border-radius: 16px;
        padding: 14px;
      }
      .diag .title {
        font-weight: 900;
        margin-bottom: 8px;
      }
      .diag .big {
        font-size: 18px;
        font-weight: 950;
        letter-spacing: -0.4px;
        margin-bottom: 8px;
      }
      .diag .desc {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.35;
      }

      .one-liner {
        margin-top: 14px;
        border: 1px solid rgba(122, 167, 255, 0.22);
        background: linear-gradient(
          135deg,
          rgba(122, 167, 255, 0.14),
          rgba(72, 213, 151, 0.08)
        );
        border-radius: var(--radius);
        padding: 16px;
        box-shadow: var(--shadow);
      }
      .one-liner .ttl {
        color: var(--muted);
        font-size: 12px;
        margin-bottom: 8px;
      }
      .one-liner .txt {
        font-size: 16px;
        font-weight: 900;
        letter-spacing: -0.2px;
        line-height: 1.4;
      }

      .action-card {
        margin-top: 12px;
        border: 1px solid rgba(72, 213, 151, 0.22);
        background: linear-gradient(
          135deg,
          rgba(72, 213, 151, 0.14),
          rgba(122, 167, 255, 0.07)
        );
        border-radius: var(--radius);
        padding: 16px;
        box-shadow: var(--shadow);
      }
      .action-card .ttl {
        color: var(--muted);
        font-size: 12px;
        margin-bottom: 8px;
      }
      .action-card .txt {
        font-size: 14px;
        font-weight: 850;
        letter-spacing: -0.1px;
        line-height: 1.45;
      }

      .footer-note {
        margin-top: 12px;
        font-size: 12px;
        color: rgba(231, 238, 252, 0.55);
        line-height: 1.35;
      }
      .toast {
        position: fixed;
        left: 50%;
        bottom: 18px;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.68);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 999px;
        font-size: 12px;
        box-shadow: var(--shadow);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.22s ease, transform 0.22s ease;
      }
      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(-6px);
      }
    </style>
    <style>
    .adsense-block {
      margin: 16px 0;
      display: flex;
      justify-content: center;
    }
    .adsbygoogle {
      display: block;
      margin: 16px auto;
        text-align: center;
}
  </style>
</head>

  <body>
    <div class="wrap">
      <header>
        <div class="brand">
          <div class="logo"><span>ğŸ“Š</span></div>
          <div>
            <h1>ìì‚° ë¹„ì¤‘ ì§„ë‹¨</h1>
            <p class="sub">
              í˜„ê¸ˆÂ·ê¸ˆ(í˜„ë¬¼)Â·ë¶€ë™ì‚°Â·ì£¼ì‹Â·ì½”ì¸ ë¹„ì¤‘ì„ í•œëˆˆì— ë³´ê³ , í¬íŠ¸í´ë¦¬ì˜¤
              íƒ€ì…ì„ ê°€ë³ê²Œ ì ê²€í•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <div class="top-actions">
          <button class="btn primary" id="btnCalc" type="button">
            âš™ï¸ ê³„ì‚°í•˜ê¸°
          </button>
          <button class="btn" id="btnReset" type="button">ğŸ”„ ì´ˆê¸°í™”</button>
          <button class="btn" id="btnShare" type="button">
            ğŸ“ ê²°ê³¼ ìš”ì•½ ë³µì‚¬
          </button>
          <a
            class="btn good"
            href="https://funnyfunny.cloud"
            target="_blank"
            rel="noopener"
            >â¡ï¸ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°</a
          >
        </div>
      </header>

      <div class="grid">
        <!-- INPUT PANEL -->
        <section class="panel">
          <div class="hd">
            <strong>ì…ë ¥</strong>
            <span style="color: var(--muted); font-size: 12px"
              >ë‹¨ìœ„: ë§Œì› ë˜ëŠ” ì›(ììœ )</span
            >
          </div>
          <div class="bd">
            <div class="field">
              <label for="cash">ğŸ’° í˜„ê¸ˆ/ì˜ˆê¸ˆ</label>
              <input
                id="cash"
                type="number"
                min="0"
                step="1"
                placeholder="ì˜ˆ: 10000000"
              />
            </div>

            <div class="field">
              <label for="gold">ğŸª™ ê¸ˆ(í˜„ë¬¼)</label>
              <input
                id="gold"
                type="number"
                min="0"
                step="1"
                placeholder="ì˜ˆ: 3000000"
              />
            </div>

            <div class="field">
              <label for="realestate">ğŸ  ë¶€ë™ì‚°</label>
              <input
                id="realestate"
                type="number"
                min="0"
                step="1"
                placeholder="ì˜ˆ: 30000000"
              />
            </div>

            <div class="field">
              <label for="stocks">ğŸ“ˆ ì£¼ì‹</label>
              <input
                id="stocks"
                type="number"
                min="0"
                step="1"
                placeholder="ì˜ˆ: 15000000"
              />
            </div>

            <div class="field">
              <label for="crypto">ğŸš€ ì½”ì¸</label>
              <input
                id="crypto"
                type="number"
                min="0"
                step="1"
                placeholder="ì˜ˆ: 2000000"
              />
            </div>

            <div class="field">
              <label for="bonds">ğŸ›¡ï¸ ì±„ê¶Œ/ì•ˆì „ìì‚°(ì„ íƒ)</label>
              <input
                id="bonds"
                type="number"
                min="0"
                step="1"
                placeholder="ì˜ˆ: 5000000"
              />
            </div>

            <div class="field" style="margin-bottom: 2px">
              <label for="other">ğŸ§© ê¸°íƒ€(ì„ íƒ)</label>
              <input
                id="other"
                type="number"
                min="0"
                step="1"
                placeholder="ì˜ˆ: 0"
              />
            </div>

            <div class="row" style="margin-top: 12px">
              <label class="chip" title="íˆ¬ììš© ë¶€ë™ì‚°ì„ ìœ„í—˜ìì‚° ê³„ì‚°ì— í¬í•¨">
                <input type="checkbox" id="optReAsRisk" />
                <span>ë¶€ë™ì‚°ì„ ìœ„í—˜ìì‚°ì— í¬í•¨</span>
              </label>

              <label
                class="chip"
                title="ê²°ê³¼ë¥¼ ì…ë ¥ê°’ê³¼ í•¨ê»˜ URLë¡œ ê³µìœ (ë¯¼ê°í•˜ë©´ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”)"
              >
                <input type="checkbox" id="optShareUrl" />
                <span>URL ê³µìœ ìš© íŒŒë¼ë¯¸í„° ìƒì„±</span>
              </label>
            </div>

            <div class="note">
              â€» ì´ ê²°ê³¼ëŠ” íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹Œ <b>ìì‚° êµ¬ì¡° ì ê²€ìš©</b>ì…ë‹ˆë‹¤.
              ì…ë ¥ê°’ì„ ë°”ê¾¸ë©° â€œê°€ì • ì‹œë®¬ë ˆì´ì…˜â€ì²˜ëŸ¼ ì¨ë„ ì¢‹ì•„ìš”.
            </div>
          </div>
        </section>

        <!-- RESULT PANEL -->
        <section class="summary">
          <div class="summary-top">
            <div class="card">
              <div class="kpi-title">ë‚´ ì´ ìì‚°</div>
              <div class="kpi-value" id="totalText">â€”</div>
              <div class="badge" id="typeBadge">
                <span id="typeIcon">ğŸ§¾</span>
                <span id="typeName">ì•„ì§ ê³„ì‚° ì „</span>
                <small id="typeHint" style="margin-left: 6px"
                  >ì…ë ¥ í›„ ê³„ì‚°í•˜ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”</small
                >
              </div>
            </div>

            <div class="card">
              <div class="kpi-title">ë¹„ì¤‘ ë¯¸ë‹ˆ ë°” ì°¨íŠ¸</div>
              <div class="bars" id="barList">
                <!-- filled by JS -->
              </div>
              <div class="footer-note">
                ìˆ«ìë³´ë‹¤ â€œêµ¬ì¡°â€ê°€ ë¨¼ì € ë³´ì´ë„ë¡, í° ë¹„ì¤‘ë¶€í„° ì •ë ¬í•´ í‘œì‹œí•©ë‹ˆë‹¤.
              </div>
            </div>
          </div>

          <div class="card">
            <div class="kpi-title">ìì‚° ë¹„ì¤‘ ì¹´ë“œ</div>
            <div class="asset-cards" id="assetCards">
              <!-- filled by JS -->
            </div>
          </div>

          <div class="card">
            <div class="kpi-title">í•µì‹¬ ì§„ë‹¨(3ê°€ì§€)</div>
            <div class="diag-grid">
              <div class="diag">
                <div class="title">âš ï¸ ìœ„í—˜ìì‚° ë¹„ì¤‘</div>
                <div class="big" id="riskPctText">â€”</div>
                <div class="desc" id="riskDesc">
                  ì£¼ì‹Â·ì½”ì¸(ì˜µì…˜ì— ë”°ë¼ ë¶€ë™ì‚° í¬í•¨) ë¹„ì¤‘ì„ ê¸°ì¤€ìœ¼ë¡œ ë³€ë™ì„± ì²´ê°
                  ê°€ëŠ¥ì„±ì„ ì ê²€í•©ë‹ˆë‹¤.
                </div>
              </div>

              <div class="diag">
                <div class="title">ğŸ’§ í˜„ê¸ˆ ì—¬ìœ ë„</div>
                <div class="big" id="liqText">â€”</div>
                <div class="desc" id="liqDesc">
                  í˜„ê¸ˆ/ì˜ˆê¸ˆ ë¹„ì¤‘ì„ ê¸°ì¤€ìœ¼ë¡œ ê¸‰í•œ ìƒí™© ë˜ëŠ” ê¸°íšŒ ëŒ€ì‘ë ¥ì„ ê°€ë³ê²Œ
                  ì ê²€í•©ë‹ˆë‹¤.
                </div>
              </div>

              <div class="diag">
                <div class="title">ğŸ¯ ìì‚° ì§‘ì¤‘ë„</div>
                <div class="big" id="concText">â€”</div>
                <div class="desc" id="concDesc">
                  í•œ ìì‚°ì´ ë„ˆë¬´ ì»¤ì§€ë©´ ì¥ì ë„ ì»¤ì§€ì§€ë§Œ, ì˜ˆìƒ ë°– ìƒí™©ì—ì„œ
                  ë¶ˆí¸í•¨ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
              </div>
            </div>

            <div class="one-liner">
              <div class="ttl">ì˜¤ëŠ˜ì˜ í•œ ì¤„</div>
              <div class="txt" id="oneLiner">â€”</div>
            </div>

            <div class="action-card">
              <div class="ttl">ğŸ‘‰ ì´ëŸ° ì„ íƒì€ ì–´ë•Œìš”?</div>
              <div class="txt" id="oneAction">â€”</div>
            </div>

            <div class="footer-note">
              * ì´ ì§„ë‹¨ì€ â€œì„±í–¥ í‰ê°€â€ê°€ ì•„ë‹ˆë¼,
              <b>í˜„ì¬ ì…ë ¥í•œ ìì‚° ë¹„ì¤‘</b>ë§Œìœ¼ë¡œ ë‚˜ì˜¨ ê²°ê³¼ì…ë‹ˆë‹¤.
            </div>
          </div>
        </section>
      </div>
    </div>

    <div class="toast" id="toast">ë³µì‚¬í–ˆì–´ìš”</div>

    <script>
      // ---------- Helpers ----------
      const fmt = (n) => {
        if (!isFinite(n)) return "â€”";
        // KRW ìŠ¤íƒ€ì¼ë¡œ ë³´ê¸° ì¢‹ê²Œ
        return new Intl.NumberFormat("ko-KR").format(Math.round(n));
      };
      const pct = (x) => (isFinite(x) ? (x * 100).toFixed(1) + "%" : "â€”");
      const clamp = (v, a, b) => Math.min(b, Math.max(a, v));

      const toast = (msg) => {
        const el = document.getElementById("toast");
        el.textContent = msg;
        el.classList.add("show");
        setTimeout(() => el.classList.remove("show"), 1200);
      };

      const getNum = (id) => {
        const v = Number(document.getElementById(id).value || 0);
        return isFinite(v) && v > 0 ? v : 0;
      };

      const ASSETS = [
        { key: "cash", label: "í˜„ê¸ˆ", icon: "ğŸ’°" },
        { key: "gold", label: "ê¸ˆ(í˜„ë¬¼)", icon: "ğŸª™" },
        { key: "realestate", label: "ë¶€ë™ì‚°", icon: "ğŸ " },
        { key: "stocks", label: "ì£¼ì‹", icon: "ğŸ“ˆ" },
        { key: "crypto", label: "ì½”ì¸", icon: "ğŸš€" },
        { key: "bonds", label: "ì±„ê¶Œ/ì•ˆì „ìì‚°", icon: "ğŸ›¡ï¸" },
        { key: "other", label: "ê¸°íƒ€", icon: "ğŸ§©" },
      ];

      // ---------- Core diagnosis rules ----------
      function portfolioType(riskRatio) {
        // riskRatio: 0~1
        if (riskRatio < 0.25)
          return {
            icon: "ğŸ›¡ï¸",
            name: "ì•ˆì •í˜•",
            hint: "ë³€ë™ì„±ë³´ë‹¤ ì•ˆì •ì´ ìš°ì„ ì¸ êµ¬ì¡°",
          };
        if (riskRatio < 0.6)
          return {
            icon: "âš–ï¸",
            name: "ê· í˜•í˜•",
            hint: "ì„±ì¥ê³¼ ì•ˆì •ì´ ì„ì¸ êµ¬ì¡°",
          };
        if (riskRatio < 0.85)
          return { icon: "ğŸš€", name: "ê³µê²©í˜•", hint: "ì„±ì¥ì„ ìš°ì„ í•˜ëŠ” êµ¬ì¡°" };
        return {
          icon: "ğŸŒªï¸",
          name: "ê³ ë³€ë™ ì§‘ì¤‘í˜•",
          hint: "ìˆ˜ìµê³¼ ë³€ë™ì„±ì´ í•¨ê»˜ í° êµ¬ì¡°",
        };
      }

      function liquidityStatus(cashRatio) {
        // cashRatio: 0~1
        if (cashRatio < 0.05)
          return {
            big: "ë‚®ì€ í¸",
            desc: "í˜„ê¸ˆì´ ì ì€ í¸ì´ì—ìš”. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ìƒí™©ì´ë‚˜ ê¸°íšŒ ëŒ€ì‘ì´ ë¶ˆí¸í•  ìˆ˜ ìˆì–´ìš”.",
          };
        if (cashRatio < 0.2)
          return {
            big: "ë³´í†µ ìˆ˜ì¤€",
            desc: "ì¼ìƒê³¼ íˆ¬ì ëª¨ë‘ ë¬´ë‚œí•œ ìˆ˜ì¤€ì´ì—ìš”. í•„ìš”í•˜ë©´ ì¡°ê¸ˆì”© ì¡°ì •í•´ë„ ì¢‹ì•„ìš”.",
          };
        if (cashRatio < 0.5)
          return {
            big: "ì—¬ìœ  ìˆëŠ” í¸",
            desc: "ì•ˆì •ê°ì´ ì¢‹ì•„ìš”. ë‹¤ë§Œ ë„ˆë¬´ ê³¼í•˜ë©´ ì„±ì¥ ì†ë„ëŠ” ëŠë ¤ì§ˆ ìˆ˜ ìˆì–´ìš”.",
          };
        return {
          big: "ë§¤ìš° ë†’ì€ í¸",
          desc: "ì•ˆì •ê°ì€ í¬ì§€ë§Œ, ìì‚°ì´ ì¼í•˜ì§€ ì•ŠëŠ” êµ¬ê°„ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
        };
      }

      function concentration(top) {
        // top: {label, ratio}
        if (!top) return { big: "â€”", desc: "â€”" };
        const r = top.ratio;
        if (r >= 0.5)
          return {
            big: `${top.label} ë¹„ì¤‘ì´ ê°€ì¥ í½ë‹ˆë‹¤ (${(r * 100).toFixed(1)}%)`,
            desc: "í•œ ìì‚°ì— ë¹„ì¤‘ì´ í° êµ¬ì¡°ì˜ˆìš”. ì¥ì ë„ í¬ì§€ë§Œ, ì˜ˆìƒ ë°– ìƒí™©ì—ì„  ë¶ˆí¸í•¨ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”.",
          };
        if (r >= 0.35)
          return {
            big: `${top.label} ë¹„ì¤‘ì´ ê°€ì¥ í½ë‹ˆë‹¤ (${(r * 100).toFixed(1)}%)`,
            desc: "íŠ¹ì • ìì‚°ì— í˜ì´ ì‹¤ë¦° í¸ì´ì—ìš”. ìœ ì§€í•´ë„ ì¢‹ê³ , ë¶€ë‹´ë˜ë©´ ë¶„ì‚°ì„ ê³ ë ¤í•´ë³¼ ë§Œí•´ìš”.",
          };
        return {
          big: `${top.label} ë¹„ì¤‘ì´ ê°€ì¥ í½ë‹ˆë‹¤ (${(r * 100).toFixed(1)}%)`,
          desc: "ìì‚°ì´ ë¹„êµì  ê³ ë¥´ê²Œ ë¶„ì‚°ë˜ì–´ ìˆì–´ìš”. í° ì ë¦¼ì€ ì ì€ í¸ì…ë‹ˆë‹¤.",
        };
      }

      function oneLinerBy(typeName, cashRatio, top) {
        const topLabel = top?.label || "íŠ¹ì • ìì‚°";
        if (typeName === "ì•ˆì •í˜•") {
          if (cashRatio < 0.1)
            return "ì „ì²´ì ìœ¼ë¡œ ì•ˆì • ì¤‘ì‹¬ì´ì—ìš”. ë‹¤ë§Œ í˜„ê¸ˆ ì—¬ìœ ê°€ ì–‡ìœ¼ë©´ ë§ˆìŒì´ í”ë“¤ë¦´ ìˆ˜ ìˆì–´ìš”.";
          return "ì•ˆì •ê°ì´ ê°•í•œ êµ¬ì¡°ì˜ˆìš”. í° ì‹¤ìˆ˜ ê°€ëŠ¥ì„±ì€ ë‚®ì€ í¸ì…ë‹ˆë‹¤.";
        }
        if (typeName === "ê· í˜•í˜•") {
          if (cashRatio < 0.05)
            return "ê· í˜•ì€ ì¢‹ì€ë° í¬ì…˜(í˜„ê¸ˆ)ì´ ë¶€ì¡±í•´ ë³´ì—¬ìš”. ì‘ì€ ë³´ê°•ë§Œ í•´ë„ í¸í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.";
          if (top && top.ratio >= 0.5)
            return `ê· í˜• ì†ì—ì„œë„ ${topLabel} ì ë¦¼ì´ ì»¤ìš”. ì¥ì ì€ í¬ê³ , ë‹¨ì ë„ ë¶„ëª…í•´ìš”.`;
          return "ì„±ì¥ê³¼ ì•ˆì •ì´ ì ì ˆíˆ ì„ì¸ êµ¬ì¡°ì˜ˆìš”. ìœ ì§€í•˜ë©´ì„œ ë¯¸ì„¸ ì¡°ì •í•˜ê¸° ì¢‹ì€ ìƒíƒœì…ë‹ˆë‹¤.";
        }
        if (typeName === "ê³µê²©í˜•") {
          if (cashRatio < 0.05)
            return "ì„±ì¥ ì¤‘ì‹¬ì´ì—ìš”. ìˆ˜ìµ ê¸°íšŒëŠ” í¬ì§€ë§Œ, í˜„ê¸ˆì´ ì–‡ìœ¼ë©´ ì²´ê° ë³€ë™ì„±ì´ ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”.";
          return "ì„±ì¥ ì†ë„ê°€ ë¹ ë¥¼ ìˆ˜ ìˆëŠ” êµ¬ì¡°ì˜ˆìš”. í”ë“¤ë¦´ ë•Œë¥¼ ëŒ€ë¹„í•œ ê·œì¹™ì´ ìˆìœ¼ë©´ ë” ì¢‹ì•„ìš”.";
        }
        // ê³ ë³€ë™ ì§‘ì¤‘í˜•
        if (cashRatio < 0.08)
          return "ë³€ë™ì„±ì´ í¬ê²Œ ì²´ê°ë  ìˆ˜ ìˆì–´ìš”. í˜„ê¸ˆ ë²„í¼ì™€ ì›ì¹™ì´ í¬íŠ¸í´ë¦¬ì˜¤ì˜ ì•ˆì „ë²¨íŠ¸ê°€ ë©ë‹ˆë‹¤.";
        return "ìˆ˜ìµë„ ë³€ë™ì„±ë„ í° ì¡°í•©ì´ì—ìš”. â€˜ê¸°ì¤€â€™ì„ ì„¸ì›Œë‘ë©´ ë©˜íƒˆ ì†Œëª¨ê°€ ì¤„ì–´ë“¤ ìˆ˜ ìˆì–´ìš”.";
      }

      function oneAction(typeName, cashRatio, riskRatio, top) {
        // ì¶”ì²œ í–‰ë™ì€ "ë”± 1ê°œ"
        if (cashRatio < 0.05)
          return "í˜„ê¸ˆ ë¹„ì¤‘ì„ 5%pë§Œ ì˜¬ë ¤ë„ â€˜ê¸‰í•  ë•Œâ€™ì™€ â€˜ê¸°íšŒê°€ ì˜¬ ë•Œâ€™ ëŒ€ì‘ì´ í›¨ì”¬ ì‰¬ì›Œì§ˆ ìˆ˜ ìˆì–´ìš”.";
        if (top && top.ratio >= 0.5)
          return "í•œ ìì‚° ë¹„ì¤‘ì´ í° í¸ì´ë¼, ëª©í‘œ ë¹„ì¤‘(ì˜ˆ: 50% â†’ 45%)ì²˜ëŸ¼ â€˜ìƒí•œì„ â€™ í•œ ì¤„ë§Œ ì •í•´ë‘ë©´ í¸í•´ìš”.";
        if (riskRatio >= 0.85)
          return "ë¦¬ë°¸ëŸ°ì‹± ê¸°ì¤€ì„ í•˜ë‚˜ë§Œ ì •í•´ë³´ì„¸ìš”. ì˜ˆ: ìœ„í—˜ìì‚° ë¹„ì¤‘ì´ ëª©í‘œì—ì„œ Â±5% ë²—ì–´ë‚˜ë©´ ì¡°ì •.";
        if (typeName === "ì•ˆì •í˜•")
          return "ì„±ì¥ ì†ë„ê°€ ì•„ì‰½ë‹¤ë©´ â€˜ì•„ì£¼ ì‘ì€ ì„±ì¥ ë¹„ì¤‘â€™(ì˜ˆ: ì£¼ì‹ 5%p ì¶”ê°€)ì²˜ëŸ¼ ë¶€ë‹´ ë‚®ì€ ì‹¤í—˜ë¶€í„° í•´ë³´ëŠ” ê²ƒë„ ë°©ë²•ì´ì—ìš”.";
        return "ì§€ê¸ˆ êµ¬ì¡°ëŠ” ë¬´ë‚œí•´ìš”. ë‹¤ìŒ ë‹¨ê³„ëŠ” â€˜ë‚´ê°€ ë²„í‹¸ ìˆ˜ ìˆëŠ” ë‚™í­â€™ì„ ë¬¸ì¥ìœ¼ë¡œ ì ì–´ë‘ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë„ì›€ì´ ë©ë‹ˆë‹¤.";
      }

      // ---------- UI rendering ----------
      function render() {
        const values = {};
        ASSETS.forEach((a) => (values[a.key] = getNum(a.key)));

        const total = Object.values(values).reduce((s, v) => s + v, 0);

        // Guard
        if (total <= 0) {
          document.getElementById("totalText").textContent = "â€”";
          document.getElementById("typeIcon").textContent = "ğŸ§¾";
          document.getElementById("typeName").textContent = "ì…ë ¥ê°’ì´ ì—†ì–´ìš”";
          document.getElementById("typeHint").textContent =
            "ê¸ˆì•¡ì„ ì…ë ¥í•œ ë’¤ ê³„ì‚°í•´ë³´ì„¸ìš”";
          document.getElementById("assetCards").innerHTML = "";
          document.getElementById(
            "barList"
          ).innerHTML = `<div style="color:var(--muted);font-size:12px;">ì…ë ¥ í›„ ê³„ì‚°í•˜ë©´ ë¹„ì¤‘ì´ í‘œì‹œë©ë‹ˆë‹¤.</div>`;
          document.getElementById("riskPctText").textContent = "â€”";
          document.getElementById("liqText").textContent = "â€”";
          document.getElementById("concText").textContent = "â€”";
          document.getElementById("oneLiner").textContent = "â€”";
          document.getElementById("oneAction").textContent = "â€”";
          return;
        }

        const ratios = {};
        ASSETS.forEach((a) => (ratios[a.key] = values[a.key] / total));

        // Risk assets: stocks + crypto (+ realestate option)
        const includeReAsRisk = document.getElementById("optReAsRisk").checked;
        const riskValue =
          values.stocks +
          values.crypto +
          (includeReAsRisk ? values.realestate : 0);
        const riskRatio = riskValue / total;

        // Liquidity: cash only for simple rule
        const cashRatio = ratios.cash;

        // Concentration: top asset (ignore zero)
        const nonZero = ASSETS.map((a) => ({
          ...a,
          value: values[a.key],
          ratio: ratios[a.key],
        }))
          .filter((x) => x.value > 0)
          .sort((a, b) => b.ratio - a.ratio);
        const top = nonZero[0]
          ? { label: nonZero[0].label, ratio: nonZero[0].ratio }
          : null;

        // Type
        const t = portfolioType(riskRatio);

        // Update KPI
        document.getElementById("totalText").textContent = "â‚© " + fmt(total);
        document.getElementById("typeIcon").textContent = t.icon;
        document.getElementById("typeName").textContent = t.name;
        document.getElementById("typeHint").textContent = t.hint;

        // Asset cards (sort by ratio desc, show only >0)
        const assetCards = nonZero
          .map((a) => {
            return `
          <div class="asset">
            <div class="t">
              <div class="name">${a.icon} ${a.label}</div>
              <div class="pct">${(a.ratio * 100).toFixed(1)}%</div>
            </div>
            <div class="amt">â‚© ${fmt(a.value)}</div>
          </div>
        `;
          })
          .join("");
        document.getElementById("assetCards").innerHTML = assetCards;

        // Bar list
        const bars = nonZero
          .slice(0, 6)
          .map((a) => {
            const w = clamp(a.ratio * 100, 0, 100);
            return `
        <div class="bar">
          <div>${a.icon} ${a.label}</div>
          <div class="track"><div class="fill" data-w="${w}"></div></div>
          <div style="text-align:right">${w.toFixed(1)}%</div>
        </div>
      `;
          })
          .join("");
        document.getElementById("barList").innerHTML =
          bars ||
          `<div style="color:var(--muted);font-size:12px;">í‘œì‹œí•  í•­ëª©ì´ ì—†ì–´ìš”.</div>`;
        // animate fills
        requestAnimationFrame(() => {
          document
            .querySelectorAll(".fill")
            .forEach((el) => (el.style.width = el.dataset.w + "%"));
        });

        // Diagnostics
        document.getElementById("riskPctText").textContent =
          (riskRatio * 100).toFixed(1) + "%";
        const riskMsg =
          riskRatio < 0.25
            ? "ë³€ë™ì„±ë³´ë‹¤ ì•ˆì •ì´ ìš°ì„ ì¸ êµ¬ê°„ì´ì—ìš”."
            : riskRatio < 0.6
            ? "ì„±ì¥ê³¼ ì•ˆì •ì´ í•¨ê»˜ ì„ì¸ êµ¬ê°„ì´ì—ìš”."
            : riskRatio < 0.85
            ? "ì„±ì¥ì— ë¬´ê²Œê°€ ì‹¤ë¦° ìƒíƒœì˜ˆìš”. í”ë“¤ë¦¼ë„ ì²´ê°ë  ìˆ˜ ìˆì–´ìš”."
            : "ê³ ë³€ë™ êµ¬ê°„ì´ì—ìš”. ê·œì¹™(ìƒí•œ/í•˜í•œ)ì´ ìˆìœ¼ë©´ í›¨ì”¬ í¸í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.";
        document.getElementById(
          "riskDesc"
        ).textContent = `í˜„ì¬ ìœ„í—˜ìì‚° ë¹„ì¤‘ì€ ${(riskRatio * 100).toFixed(
          1
        )}%ì…ë‹ˆë‹¤. ${riskMsg}`;

        const liq = liquidityStatus(cashRatio);
        document.getElementById("liqText").textContent =
          liq.big + ` (${(cashRatio * 100).toFixed(1)}%)`;
        document.getElementById("liqDesc").textContent = liq.desc;

        const conc = concentration(top);
        document.getElementById("concText").textContent = conc.big;
        document.getElementById("concDesc").textContent = conc.desc;

        // One-liner + One action
        document.getElementById("oneLiner").textContent = oneLinerBy(
          t.name,
          cashRatio,
          top
        );
        document.getElementById("oneAction").textContent = oneAction(
          t.name,
          cashRatio,
          riskRatio,
          top
        );

        // Optional: URL share params (be careful with sensitive data)
        const shareUrl = document.getElementById("optShareUrl").checked;
        if (shareUrl) {
          const params = new URLSearchParams({
            cash: String(values.cash),
            gold: String(values.gold),
            re: String(values.realestate),
            st: String(values.stocks),
            cr: String(values.crypto),
            bd: String(values.bonds),
            ot: String(values.other),
            reRisk: includeReAsRisk ? "1" : "0",
          });
          history.replaceState(
            null,
            "",
            `${location.pathname}?${params.toString()}`
          );
        } else {
          history.replaceState(null, "", `${location.pathname}`);
        }
      }

      function resetAll() {
        [
          "cash",
          "gold",
          "realestate",
          "stocks",
          "crypto",
          "bonds",
          "other",
        ].forEach((id) => {
          document.getElementById(id).value = "";
        });
        document.getElementById("optReAsRisk").checked = false;
        document.getElementById("optShareUrl").checked = false;
        history.replaceState(null, "", `${location.pathname}`);
        render();
        toast("ì´ˆê¸°í™”í–ˆì–´ìš”");
      }

      async function copySummary() {
        const totalText = document.getElementById("totalText").textContent;
        const typeName = document.getElementById("typeName").textContent;
        const riskPctText = document.getElementById("riskPctText").textContent;
        const liqText = document.getElementById("liqText").textContent;
        const concText = document.getElementById("concText").textContent;
        const oneLiner = document.getElementById("oneLiner").textContent;

        const lines = [
          `ìì‚° ë¹„ì¤‘ ì§„ë‹¨ ê²°ê³¼`,
          `- ì´ ìì‚°: ${totalText}`,
          `- íƒ€ì…: ${typeName}`,
          `- ìœ„í—˜ìì‚° ë¹„ì¤‘: ${riskPctText}`,
          `- í˜„ê¸ˆ ì—¬ìœ ë„: ${liqText}`,
          `- ì§‘ì¤‘ë„: ${concText}`,
          `- í•œ ì¤„: ${oneLiner}`,
          ``,
          `ë‹¤ë¥¸ ì„œë¹„ìŠ¤: https://funnyfunny.cloud`,
        ].join("\n");

        try {
          await navigator.clipboard.writeText(lines);
          toast("ê²°ê³¼ ìš”ì•½ì„ ë³µì‚¬í–ˆì–´ìš”");
        } catch (e) {
          // fallback
          const ta = document.createElement("textarea");
          ta.value = lines;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          toast("ë³µì‚¬í–ˆì–´ìš”");
        }
      }

      // ---------- Wire up ----------
      document.getElementById("btnCalc").addEventListener("click", render);
      document.getElementById("btnReset").addEventListener("click", resetAll);
      document
        .getElementById("btnShare")
        .addEventListener("click", copySummary);

      // Auto-calc on Enter
      document.querySelectorAll("input[type='number']").forEach((inp) => {
        inp.addEventListener("keydown", (e) => {
          if (e.key === "Enter") render();
        });
      });

      // Load from URL params if present (only when optShareUrl is used)
      (function initFromUrl() {
        const p = new URLSearchParams(location.search);
        if ([...p.keys()].length === 0) {
          render();
          return;
        }

        const map = {
          cash: "cash",
          gold: "gold",
          re: "realestate",
          st: "stocks",
          cr: "crypto",
          bd: "bonds",
          ot: "other",
        };
        let hasAny = false;
        for (const [k, id] of Object.entries(map)) {
          if (p.has(k)) {
            document.getElementById(id).value = p.get(k) || "";
            hasAny = true;
          }
        }
        if (p.get("reRisk") === "1")
          document.getElementById("optReAsRisk").checked = true;
        if (hasAny) {
          // ê³µìœ ë¡œ ë“¤ì–´ì˜¨ ê²½ìš°ëŠ” ë¯¼ê°í•˜ë‹ˆ ì‚¬ìš©ìê°€ ì›í•  ë•Œë§Œ URL ìœ ì§€í•˜ë„ë¡ optëŠ” êº¼ë‘”ë‹¤
          document.getElementById("optShareUrl").checked = false;
        }
        render();
      })();
    </script>
  </body>
</html>
