<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title data-i18n-title="metaTitle">ìì‚° ë¹„ì¤‘ ì§„ë‹¨ Â· í¬íŠ¸í´ë¦¬ì˜¤ íƒ€ì…</title>

    <!-- Favicon: ìë™ ìƒì„±(SVG data URI) -->
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A//www.w3.org/2000/svg'%20viewBox%3D'0%200%20100%20100'%3E%3Crect%20width%3D'100'%20height%3D'100'%20rx%3D'22'%20fill%3D'%230b1220'/%3E%3Ctext%20x%3D'50'%20y%3D'63'%20font-size%3D'52'%20text-anchor%3D'middle'%3E%F0%9F%93%8A%3C/text%3E%3C/svg%3E"
    />

    <!-- OG -->
    <meta property="og:title" content="Asset Allocation Check" />
    <meta
      property="og:description"
      content="í˜„ê¸ˆÂ·ê¸ˆÂ·ë¶€ë™ì‚°Â·ì£¼ì‹Â·ì½”ì¸ ë¹„ì¤‘ì„ í•œëˆˆì— ë³´ê³ , ê°€ë³ê²Œ í¬íŠ¸í´ë¦¬ì˜¤ íƒ€ì…ì„ ì§„ë‹¨í•©ë‹ˆë‹¤."
      data-i18n-content="metaDescription"
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0b1220/ffffff&text=Asset%20Allocation%20Check"
    />

    <!-- Google AdSense (ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ë§Œ) -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1204894220949193"
      crossorigin="anonymous"
    ></script>

    <style>
      :root {
        --bg: #0b1220;
        --card: #121b2f;
        --card2: #0f172a;
        --text: #e7eefc;
        --muted: #a9b6d3;
        --line: rgba(255, 255, 255, 0.08);
        --good: #48d597;
        --warn: #ffcc66;
        --bad: #ff6b6b;
        --accent: #7aa7ff;
        --shadow: 0 12px 35px rgba(0, 0, 0, 0.35);
        --radius: 18px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system,
          "Apple SD Gothic Neo", "Noto Sans KR", Segoe UI, Roboto, Arial;
        background: radial-gradient(
            1200px 600px at 30% -10%,
            rgba(122, 167, 255, 0.22),
            transparent 60%
          ),
          radial-gradient(
            900px 500px at 90% 10%,
            rgba(72, 213, 151, 0.14),
            transparent 55%
          ),
          var(--bg);
        color: var(--text);
      }
      a {
        color: inherit;
      }
      .wrap {
        max-width: 1100px;
        margin: 0 auto;
        padding: 24px 20px 48px;
      }
      header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }
      .brand {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .logo {
        width: 44px;
        height: 44px;
        border-radius: 14px;
        background: linear-gradient(
          135deg,
          rgba(122, 167, 255, 0.25),
          rgba(72, 213, 151, 0.18)
        );
        display: grid;
        place-items: center;
        box-shadow: var(--shadow);
        border: 1px solid var(--line);
      }
      .logo span {
        font-size: 22px;
      }
      h1 {
        font-size: 22px;
        margin: 0 0 6px;
        letter-spacing: -0.2px;
      }
      .sub {
        margin: 0;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.35;
      }
      .top-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .btn {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 14px;
        cursor: pointer;
        font-weight: 650;
        letter-spacing: -0.1px;
        transition: transform 0.08s ease, background 0.2s ease;
        display: inline-flex;
        gap: 8px;
        align-items: center;
        user-select: none;
      }
      .btn:hover {
        background: rgba(255, 255, 255, 0.07);
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn.primary {
        background: linear-gradient(
          135deg,
          rgba(122, 167, 255, 0.24),
          rgba(122, 167, 255, 0.1)
        );
        border-color: rgba(122, 167, 255, 0.25);
      }
      .btn.good {
        background: linear-gradient(
          135deg,
          rgba(72, 213, 151, 0.22),
          rgba(72, 213, 151, 0.08)
        );
        border-color: rgba(72, 213, 151, 0.25);
      }
      .grid {
        display: grid;
        grid-template-columns: 400px 1fr;
        gap: 20px;
        align-items: start;
      }
      @media (max-width: 980px) {
        .grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }
        .top-actions {
          justify-content: flex-start;
          width: 100%;
        }
      }
      .panel {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .panel .hd {
        padding: 16px 20px;
        background: rgba(255, 255, 255, 0.02);
        border-bottom: 1px solid var(--line);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
      }
      .panel .hd strong {
        font-size: 15px;
        font-weight: 700;
        letter-spacing: -0.1px;
      }
      .panel .bd {
        padding: 20px;
      }
      .field {
        display: grid;
        grid-template-columns: 1fr 160px;
        gap: 12px;
        align-items: center;
        margin-bottom: 14px;
      }
      .field label {
        font-size: 14px;
        color: var(--muted);
        font-weight: 500;
      }
      @media (max-width: 600px) {
        .field {
          grid-template-columns: 1fr;
          gap: 8px;
        }
      }
      input[type="number"] {
        width: 100%;
        padding: 10px 12px;
        border-radius: 14px;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.15);
        color: var(--text);
        outline: none;
        font-weight: 650;
      }
      input[type="number"]::placeholder {
        color: rgba(231, 238, 252, 0.35);
      }
      .row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .chip {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        padding: 9px 10px;
        border-radius: 999px;
        font-size: 12px;
        color: var(--muted);
        display: inline-flex;
        gap: 8px;
        align-items: center;
        cursor: pointer;
        user-select: none;
      }
      .chip input {
        accent-color: var(--accent);
      }
      .note {
        margin-top: 10px;
        color: var(--muted);
        font-size: 12px;
        line-height: 1.35;
      }

      /* Result side */
      .summary {
        display: grid;
        gap: 20px;
      }
      .summary-top {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      @media (max-width: 700px) {
        .summary-top {
          grid-template-columns: 1fr;
        }
      }
      .card {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 20px;
      }
      .kpi-title {
        color: var(--muted);
        font-size: 13px;
        margin-bottom: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .kpi-value {
        font-size: 26px;
        font-weight: 850;
        letter-spacing: -0.6px;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.12);
        font-weight: 850;
        margin-top: 10px;
        letter-spacing: -0.2px;
      }
      .badge small {
        font-weight: 750;
        color: var(--muted);
      }
      .asset-cards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
      }
      @media (max-width: 900px) {
        .asset-cards {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (max-width: 520px) {
        .asset-cards {
          grid-template-columns: 1fr;
        }
      }
      .asset {
        padding: 14px;
        border-radius: 16px;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.12);
      }
      .asset .t {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 8px;
      }
      .asset .name {
        font-weight: 850;
        letter-spacing: -0.2px;
      }
      .asset .pct {
        font-weight: 900;
      }
      .asset .amt {
        color: var(--muted);
        font-size: 12px;
        margin-top: 6px;
      }
      .bars {
        margin-top: 10px;
        display: grid;
        gap: 8px;
      }
      .bar {
        display: grid;
        grid-template-columns: 92px 1fr 62px;
        gap: 10px;
        align-items: center;
        font-size: 12px;
        color: var(--muted);
      }
      .track {
        height: 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.06);
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }
      .fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(
          90deg,
          rgba(122, 167, 255, 0.85),
          rgba(72, 213, 151, 0.75)
        );
        border-radius: 999px;
        transition: width 0.6s ease;
      }

      .diag-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        margin-top: 20px;
      }
      @media (max-width: 900px) {
        .diag-grid {
          grid-template-columns: 1fr;
          gap: 16px;
        }
      }
      .diag {
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.12);
        border-radius: 16px;
        padding: 18px;
      }
      .diag .title {
        font-weight: 900;
        margin-bottom: 8px;
      }
      .diag .big {
        font-size: 18px;
        font-weight: 950;
        letter-spacing: -0.4px;
        margin-bottom: 8px;
      }
      .diag .desc {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.35;
      }

      .one-liner {
        margin-top: 20px;
        border: 1px solid rgba(122, 167, 255, 0.25);
        background: linear-gradient(
          135deg,
          rgba(122, 167, 255, 0.12),
          rgba(72, 213, 151, 0.06)
        );
        border-radius: var(--radius);
        padding: 18px;
        box-shadow: var(--shadow);
      }
      .one-liner .ttl {
        color: var(--muted);
        font-size: 12px;
        margin-bottom: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .one-liner .txt {
        font-size: 15px;
        font-weight: 600;
        letter-spacing: -0.1px;
        line-height: 1.5;
      }

      .action-card {
        margin-top: 16px;
        border: 1px solid rgba(72, 213, 151, 0.25);
        background: linear-gradient(
          135deg,
          rgba(72, 213, 151, 0.12),
          rgba(122, 167, 255, 0.06)
        );
        border-radius: var(--radius);
        padding: 18px;
        box-shadow: var(--shadow);
      }
      .action-card .ttl {
        color: var(--muted);
        font-size: 12px;
        margin-bottom: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .action-card .txt {
        font-size: 14px;
        font-weight: 600;
        letter-spacing: -0.1px;
        line-height: 1.5;
      }

      .footer-note {
        margin-top: 12px;
        font-size: 12px;
        color: rgba(231, 238, 252, 0.55);
        line-height: 1.35;
      }
      .toast {
        position: fixed;
        left: 50%;
        bottom: 18px;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.68);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 999px;
        font-size: 12px;
        box-shadow: var(--shadow);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.22s ease, transform 0.22s ease;
      }
      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(-6px);
      }
    </style>
    <style>
    .adsense-block {
      margin: 16px 0;
      display: flex;
      justify-content: center;
    }
    .adsbygoogle {
      display: block;
      margin: 16px auto;
        text-align: center;
}
  </style>
  <style>
    .lang-switch {
      position: fixed;
      top: 16px;
      right: 16px;
      display: inline-flex;
      gap: 0;
      padding: 3px;
      border-radius: 999px;
      background: rgba(11, 18, 32, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      z-index: 100;
      border: 1px solid rgba(122, 167, 255, 0.3);
    }
    .lang-switch button {
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.7);
      font-size: 12px;
      font-weight: 700;
      padding: 7px 14px;
      border-radius: 999px;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 44px;
      text-align: center;
      letter-spacing: 0.02em;
    }
    .lang-switch button.active {
      background: rgba(122, 167, 255, 0.2);
      color: #7aa7ff;
      box-shadow: 0 2px 8px rgba(122, 167, 255, 0.4);
    }
    .lang-switch button:not(.active):hover {
      background: rgba(122, 167, 255, 0.1);
      color: rgba(255, 255, 255, 0.9);
    }
  </style>
</head>

  <body>
  <div class="lang-switch" role="tablist" aria-label="Language switcher">
    <button type="button" data-lang="ko" class="active">KR</button>
    <button type="button" data-lang="en">EN</button>
  </div>
  <div class="wrap">
      <header>
        <div class="brand">
          <div class="logo"><span>ğŸ“Š</span></div>
          <div>
            <h1 data-i18n="title">ìì‚° ë¹„ì¤‘ ì§„ë‹¨</h1>
            <p class="sub" data-i18n="subtitle">
              í˜„ê¸ˆÂ·ê¸ˆ(í˜„ë¬¼)Â·ë¶€ë™ì‚°Â·ì£¼ì‹Â·ì½”ì¸ ë¹„ì¤‘ì„ í•œëˆˆì— ë³´ê³ , í¬íŠ¸í´ë¦¬ì˜¤
              íƒ€ì…ì„ ê°€ë³ê²Œ ì ê²€í•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <div class="top-actions">
          <button class="btn primary" id="btnCalc" type="button" data-i18n="btnCalc">
            âš™ï¸ ê³„ì‚°í•˜ê¸°
          </button>
          <button class="btn" id="btnReset" type="button" data-i18n="btnReset">ğŸ”„ ì´ˆê¸°í™”</button>
          <button class="btn" id="btnShare" type="button" data-i18n="btnShare">
            ğŸ“ ê²°ê³¼ ìš”ì•½ ë³µì‚¬
          </button>
          <a
            class="btn good"
            href="https://funnyfunny.cloud"
            target="_blank"
            rel="noopener"
            data-i18n="btnOtherService">â¡ï¸ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°</a
          >
        </div>
      </header>

      <div class="grid">
        <!-- INPUT PANEL -->
        <section class="panel">
          <div class="hd">
            <strong data-i18n="inputTitle">ì…ë ¥</strong>
            <span style="color: var(--muted); font-size: 12px" data-i18n="inputUnit"
              >ë‹¨ìœ„: ë§Œì› ë˜ëŠ” ì›(ììœ )</span
            >
          </div>
          <div class="bd">
            <div class="field">
              <label for="cash" data-i18n="assetCash">ğŸ’° í˜„ê¸ˆ/ì˜ˆê¸ˆ</label>
              <input
                id="cash"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 10000000"
              />
            </div>

            <div class="field">
              <label for="gold" data-i18n="assetGold">ğŸª™ ê¸ˆ(í˜„ë¬¼)</label>
              <input
                id="gold"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 3000000"
              />
            </div>

            <div class="field">
              <label for="realestate" data-i18n="assetRealestate">ğŸ  ë¶€ë™ì‚°</label>
              <input
                id="realestate"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 30000000"
              />
            </div>

            <div class="field">
              <label for="stocks" data-i18n="assetStocks">ğŸ“ˆ ì£¼ì‹</label>
              <input
                id="stocks"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 15000000"
              />
            </div>

            <div class="field">
              <label for="crypto" data-i18n="assetCrypto">ğŸš€ ì½”ì¸</label>
              <input
                id="crypto"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 2000000"
              />
            </div>

            <div class="field">
              <label for="bonds" data-i18n="assetBonds">ğŸ›¡ï¸ ì±„ê¶Œ/ì•ˆì „ìì‚°(ì„ íƒ)</label>
              <input
                id="bonds"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 5000000"
              />
            </div>

            <div class="field" style="margin-bottom: 2px">
              <label for="other" data-i18n="assetOther">ğŸ§© ê¸°íƒ€(ì„ íƒ)</label>
              <input
                id="other"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 0"
              />
            </div>

            <div class="row" style="margin-top: 12px">
              <label class="chip" data-i18n-title="optReAsRiskTitle">
                <input type="checkbox" id="optReAsRisk" />
                <span data-i18n="optReAsRisk">ë¶€ë™ì‚°ì„ ìœ„í—˜ìì‚°ì— í¬í•¨</span>
              </label>

              <label class="chip" data-i18n-title="optShareUrlTitle">
                <input type="checkbox" id="optShareUrl" />
                <span data-i18n="optShareUrl">URL ê³µìœ ìš© íŒŒë¼ë¯¸í„° ìƒì„±</span>
              </label>
            </div>

            <div class="note" data-i18n="inputNote">
              â€» ì´ ê²°ê³¼ëŠ” íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹Œ ìì‚° êµ¬ì¡° ì ê²€ìš©ì…ë‹ˆë‹¤.
              ì…ë ¥ê°’ì„ ë°”ê¾¸ë©° "ê°€ì • ì‹œë®¬ë ˆì´ì…˜"ì²˜ëŸ¼ ì¨ë„ ì¢‹ì•„ìš”.
            </div>
          </div>
        </section>

        <!-- RESULT PANEL -->
        <section class="summary">
          <div class="summary-top">
            <div class="card">
              <div class="kpi-title" data-i18n="resultTotalAssets">ë‚´ ì´ ìì‚°</div>
              <div class="kpi-value" id="totalText">â€”</div>
              <div class="badge" id="typeBadge">
                <span id="typeIcon">ğŸ§¾</span>
                <span id="typeName" data-i18n="resultBeforeCalc">ì•„ì§ ê³„ì‚° ì „</span>
                <small id="typeHint" style="margin-left: 6px" data-i18n="resultBeforeCalcHint"
                  >ì…ë ¥ í›„ ê³„ì‚°í•˜ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”</small
                >
              </div>
            </div>

            <div class="card">
              <div class="kpi-title" data-i18n="resultMiniBarChart">ë¹„ì¤‘ ë¯¸ë‹ˆ ë°” ì°¨íŠ¸</div>
              <div class="bars" id="barList">
                <!-- filled by JS -->
              </div>
              <div class="footer-note" data-i18n="resultMiniBarChartNote">
                ìˆ«ìë³´ë‹¤ "êµ¬ì¡°"ê°€ ë¨¼ì € ë³´ì´ë„ë¡, í° ë¹„ì¤‘ë¶€í„° ì •ë ¬í•´ í‘œì‹œí•©ë‹ˆë‹¤.
              </div>
            </div>
          </div>

          <div class="card">
            <div class="kpi-title" data-i18n="resultAssetCards">ìì‚° ë¹„ì¤‘ ì¹´ë“œ</div>
            <div class="asset-cards" id="assetCards">
              <!-- filled by JS -->
            </div>
          </div>

          <div class="card">
            <div class="kpi-title" data-i18n="resultDiagnosis">í•µì‹¬ ì§„ë‹¨(3ê°€ì§€)</div>
            <div class="diag-grid">
              <div class="diag">
                <div class="title" data-i18n="diagRiskTitle">âš ï¸ ìœ„í—˜ìì‚° ë¹„ì¤‘</div>
                <div class="big" id="riskPctText">â€”</div>
                <div class="desc" id="riskDesc" data-i18n="diagRiskDesc">
                  ì£¼ì‹Â·ì½”ì¸(ì˜µì…˜ì— ë”°ë¼ ë¶€ë™ì‚° í¬í•¨) ë¹„ì¤‘ì„ ê¸°ì¤€ìœ¼ë¡œ ë³€ë™ì„± ì²´ê°
                  ê°€ëŠ¥ì„±ì„ ì ê²€í•©ë‹ˆë‹¤.
                </div>
              </div>

              <div class="diag">
                <div class="title" data-i18n="diagLiquidityTitle">ğŸ’§ í˜„ê¸ˆ ì—¬ìœ ë„</div>
                <div class="big" id="liqText">â€”</div>
                <div class="desc" id="liqDesc" data-i18n="diagLiquidityDesc">
                  í˜„ê¸ˆ/ì˜ˆê¸ˆ ë¹„ì¤‘ì„ ê¸°ì¤€ìœ¼ë¡œ ê¸‰í•œ ìƒí™© ë˜ëŠ” ê¸°íšŒ ëŒ€ì‘ë ¥ì„ ê°€ë³ê²Œ
                  ì ê²€í•©ë‹ˆë‹¤.
                </div>
              </div>

              <div class="diag">
                <div class="title" data-i18n="diagConcentrationTitle">ğŸ¯ ìì‚° ì§‘ì¤‘ë„</div>
                <div class="big" id="concText">â€”</div>
                <div class="desc" id="concDesc" data-i18n="diagConcentrationDesc">
                  í•œ ìì‚°ì´ ë„ˆë¬´ ì»¤ì§€ë©´ ì¥ì ë„ ì»¤ì§€ì§€ë§Œ, ì˜ˆìƒ ë°– ìƒí™©ì—ì„œ
                  ë¶ˆí¸í•¨ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
              </div>
            </div>

            <div class="one-liner">
              <div class="ttl" data-i18n="resultOneLinerTitle">ì˜¤ëŠ˜ì˜ í•œ ì¤„</div>
              <div class="txt" id="oneLiner">â€”</div>
            </div>

            <div class="action-card">
              <div class="ttl" data-i18n="resultActionTitle">ğŸ‘‰ ì´ëŸ° ì„ íƒì€ ì–´ë•Œìš”?</div>
              <div class="txt" id="oneAction">â€”</div>
            </div>

            <div class="footer-note" data-i18n="resultFooter">
              * ì´ ì§„ë‹¨ì€ "ì„±í–¥ í‰ê°€"ê°€ ì•„ë‹ˆë¼,
              í˜„ì¬ ì…ë ¥í•œ ìì‚° ë¹„ì¤‘ë§Œìœ¼ë¡œ ë‚˜ì˜¨ ê²°ê³¼ì…ë‹ˆë‹¤.
            </div>
          </div>
        </section>
      </div>
    </div>

    <div class="toast" id="toast" data-i18n="toastCopy">ë³µì‚¬í–ˆì–´ìš”</div>

    <script>
      // =========================
      // i18n
      // =========================
      const translations = {
        ko: {
          metaTitle: "ìì‚° ë¹„ì¤‘ ì§„ë‹¨ Â· í¬íŠ¸í´ë¦¬ì˜¤ íƒ€ì…",
          metaDescription: "í˜„ê¸ˆÂ·ê¸ˆÂ·ë¶€ë™ì‚°Â·ì£¼ì‹Â·ì½”ì¸ ë¹„ì¤‘ì„ í•œëˆˆì— ë³´ê³ , ê°€ë³ê²Œ í¬íŠ¸í´ë¦¬ì˜¤ íƒ€ì…ì„ ì§„ë‹¨í•©ë‹ˆë‹¤.",
          title: "ìì‚° ë¹„ì¤‘ ì§„ë‹¨",
          subtitle: "í˜„ê¸ˆÂ·ê¸ˆ(í˜„ë¬¼)Â·ë¶€ë™ì‚°Â·ì£¼ì‹Â·ì½”ì¸ ë¹„ì¤‘ì„ í•œëˆˆì— ë³´ê³ , í¬íŠ¸í´ë¦¬ì˜¤ íƒ€ì…ì„ ê°€ë³ê²Œ ì ê²€í•©ë‹ˆë‹¤.",
          btnCalc: "âš™ï¸ ê³„ì‚°í•˜ê¸°",
          btnReset: "ğŸ”„ ì´ˆê¸°í™”",
          btnShare: "ğŸ“ ê²°ê³¼ ìš”ì•½ ë³µì‚¬",
          btnOtherService: "â¡ï¸ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°",
          toastCopy: "ë³µì‚¬í–ˆì–´ìš”",
          toastReset: "ì´ˆê¸°í™”í–ˆì–´ìš”",
          toastCopySummary: "ê²°ê³¼ ìš”ì•½ì„ ë³µì‚¬í–ˆì–´ìš”",
          inputTitle: "ì…ë ¥",
          inputUnit: "ë‹¨ìœ„: ë§Œì› ë˜ëŠ” ì›(ììœ )",
          assetCash: "ğŸ’° í˜„ê¸ˆ/ì˜ˆê¸ˆ",
          assetGold: "ğŸª™ ê¸ˆ(í˜„ë¬¼)",
          assetRealestate: "ğŸ  ë¶€ë™ì‚°",
          assetStocks: "ğŸ“ˆ ì£¼ì‹",
          assetCrypto: "ğŸš€ ì½”ì¸",
          assetBonds: "ğŸ›¡ï¸ ì±„ê¶Œ/ì•ˆì „ìì‚°(ì„ íƒ)",
          assetOther: "ğŸ§© ê¸°íƒ€(ì„ íƒ)",
          optReAsRisk: "ë¶€ë™ì‚°ì„ ìœ„í—˜ìì‚°ì— í¬í•¨",
          optReAsRiskTitle: "íˆ¬ììš© ë¶€ë™ì‚°ì„ ìœ„í—˜ìì‚° ê³„ì‚°ì— í¬í•¨",
          optShareUrl: "URL ê³µìœ ìš© íŒŒë¼ë¯¸í„° ìƒì„±",
          optShareUrlTitle: "ê²°ê³¼ë¥¼ ì…ë ¥ê°’ê³¼ í•¨ê»˜ URLë¡œ ê³µìœ (ë¯¼ê°í•˜ë©´ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”)",
          inputNote: "â€» ì´ ê²°ê³¼ëŠ” íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹Œ ìì‚° êµ¬ì¡° ì ê²€ìš©ì…ë‹ˆë‹¤. ì…ë ¥ê°’ì„ ë°”ê¾¸ë©° \"ê°€ì • ì‹œë®¬ë ˆì´ì…˜\"ì²˜ëŸ¼ ì¨ë„ ì¢‹ì•„ìš”.",
          resultTotalAssets: "ë‚´ ì´ ìì‚°",
          resultBeforeCalc: "ì•„ì§ ê³„ì‚° ì „",
          resultBeforeCalcHint: "ì…ë ¥ í›„ ê³„ì‚°í•˜ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”",
          resultNoInput: "ì…ë ¥ê°’ì´ ì—†ì–´ìš”",
          resultNoInputHint: "ê¸ˆì•¡ì„ ì…ë ¥í•œ ë’¤ ê³„ì‚°í•´ë³´ì„¸ìš”",
          resultMiniBarChart: "ë¹„ì¤‘ ë¯¸ë‹ˆ ë°” ì°¨íŠ¸",
          resultMiniBarChartNote: "ìˆ«ìë³´ë‹¤ \"êµ¬ì¡°\"ê°€ ë¨¼ì € ë³´ì´ë„ë¡, í° ë¹„ì¤‘ë¶€í„° ì •ë ¬í•´ í‘œì‹œí•©ë‹ˆë‹¤.",
          resultAssetCards: "ìì‚° ë¹„ì¤‘ ì¹´ë“œ",
          resultDiagnosis: "í•µì‹¬ ì§„ë‹¨(3ê°€ì§€)",
          diagRiskTitle: "âš ï¸ ìœ„í—˜ìì‚° ë¹„ì¤‘",
          diagRiskDesc: "ì£¼ì‹Â·ì½”ì¸(ì˜µì…˜ì— ë”°ë¼ ë¶€ë™ì‚° í¬í•¨) ë¹„ì¤‘ì„ ê¸°ì¤€ìœ¼ë¡œ ë³€ë™ì„± ì²´ê° ê°€ëŠ¥ì„±ì„ ì ê²€í•©ë‹ˆë‹¤.",
          diagLiquidityTitle: "ğŸ’§ í˜„ê¸ˆ ì—¬ìœ ë„",
          diagLiquidityDesc: "í˜„ê¸ˆ/ì˜ˆê¸ˆ ë¹„ì¤‘ì„ ê¸°ì¤€ìœ¼ë¡œ ê¸‰í•œ ìƒí™© ë˜ëŠ” ê¸°íšŒ ëŒ€ì‘ë ¥ì„ ê°€ë³ê²Œ ì ê²€í•©ë‹ˆë‹¤.",
          diagConcentrationTitle: "ğŸ¯ ìì‚° ì§‘ì¤‘ë„",
          diagConcentrationDesc: "í•œ ìì‚°ì´ ë„ˆë¬´ ì»¤ì§€ë©´ ì¥ì ë„ ì»¤ì§€ì§€ë§Œ, ì˜ˆìƒ ë°– ìƒí™©ì—ì„œ ë¶ˆí¸í•¨ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
          resultOneLinerTitle: "ì˜¤ëŠ˜ì˜ í•œ ì¤„",
          resultActionTitle: "ğŸ‘‰ ì´ëŸ° ì„ íƒì€ ì–´ë•Œìš”?",
          resultFooter: "* ì´ ì§„ë‹¨ì€ \"ì„±í–¥ í‰ê°€\"ê°€ ì•„ë‹ˆë¼, í˜„ì¬ ì…ë ¥í•œ ìì‚° ë¹„ì¤‘ë§Œìœ¼ë¡œ ë‚˜ì˜¨ ê²°ê³¼ì…ë‹ˆë‹¤.",
          copySummaryTitle: "ìì‚° ë¹„ì¤‘ ì§„ë‹¨ ê²°ê³¼",
          copySummaryTotal: "ì´ ìì‚°",
          copySummaryType: "íƒ€ì…",
          copySummaryRisk: "ìœ„í—˜ìì‚° ë¹„ì¤‘",
          copySummaryLiquidity: "í˜„ê¸ˆ ì—¬ìœ ë„",
          copySummaryConcentration: "ì§‘ì¤‘ë„",
          copySummaryOneLiner: "í•œ ì¤„",
          copySummaryOtherServices: "ë‹¤ë¥¸ ì„œë¹„ìŠ¤",
          placeholderExample: "ì˜ˆ: 10000000",
          resultBarListEmpty: "ì…ë ¥ í›„ ê³„ì‚°í•˜ë©´ ë¹„ì¤‘ì´ í‘œì‹œë©ë‹ˆë‹¤.",
          resultBarListNoItems: "í‘œì‹œí•  í•­ëª©ì´ ì—†ì–´ìš”.",
          currencySymbol: "â‚© ",
          riskDescPrefix: "í˜„ì¬ ìœ„í—˜ìì‚° ë¹„ì¤‘ì€ {pct}%ì…ë‹ˆë‹¤. {msg}",
        },
        en: {
          metaTitle: "Asset Allocation Check Â· Portfolio Type",
          metaDescription: "View cash, gold, real estate, stocks, and crypto allocations at a glance, and easily diagnose your portfolio type.",
          title: "Asset Allocation Check",
          subtitle: "View cash, gold (physical), real estate, stocks, and crypto allocations at a glance, and easily check your portfolio type.",
          btnCalc: "âš™ï¸ Calculate",
          btnReset: "ğŸ”„ Reset",
          btnShare: "ğŸ“ Copy Summary",
          btnOtherService: "â¡ï¸ View More Services",
          toastCopy: "Copied",
          toastReset: "Reset",
          toastCopySummary: "Summary copied",
          inputTitle: "Input",
          inputUnit: "Unit: 10,000 KRW or KRW (flexible)",
          assetCash: "ğŸ’° Cash/Deposits",
          assetGold: "ğŸª™ Gold (Physical)",
          assetRealestate: "ğŸ  Real Estate",
          assetStocks: "ğŸ“ˆ Stocks",
          assetCrypto: "ğŸš€ Crypto",
          assetBonds: "ğŸ›¡ï¸ Bonds/Safe Assets (Optional)",
          assetOther: "ğŸ§© Other (Optional)",
          optReAsRisk: "Include real estate in risk assets",
          optReAsRiskTitle: "Include investment real estate in risk asset calculation",
          optShareUrl: "Generate URL sharing parameters",
          optShareUrlTitle: "Share results with input values via URL (don't use if sensitive)",
          inputNote: "â€» This result is for asset structure checking, not investment advice. You can use it like a 'scenario simulation' by changing input values.",
          resultTotalAssets: "Total Assets",
          resultBeforeCalc: "Not calculated yet",
          resultBeforeCalcHint: "Enter values and click Calculate",
          resultNoInput: "No input",
          resultNoInputHint: "Enter amounts and calculate",
          resultMiniBarChart: "Mini Bar Chart",
          resultMiniBarChartNote: "Sorted by largest allocation first to show 'structure' before numbers.",
          resultAssetCards: "Asset Allocation Cards",
          resultDiagnosis: "Core Diagnosis (3 items)",
          diagRiskTitle: "âš ï¸ Risk Asset Ratio",
          diagRiskDesc: "Checks volatility potential based on stocks and crypto (optionally including real estate) ratio.",
          diagLiquidityTitle: "ğŸ’§ Cash Reserves",
          diagLiquidityDesc: "Checks responsiveness to urgent situations or opportunities based on cash/deposits ratio.",
          diagConcentrationTitle: "ğŸ¯ Asset Concentration",
          diagConcentrationDesc: "If one asset grows too large, advantages grow but unexpected situations can cause discomfort.",
          resultOneLinerTitle: "Today's One-Liner",
          resultActionTitle: "ğŸ‘‰ What about this option?",
          resultFooter: "* This diagnosis is not a 'trait assessment' but a result based only on the currently entered asset allocation.",
          copySummaryTitle: "Asset Allocation Check Result",
          copySummaryTotal: "Total Assets",
          copySummaryType: "Type",
          copySummaryRisk: "Risk Asset Ratio",
          copySummaryLiquidity: "Cash Reserves",
          copySummaryConcentration: "Concentration",
          copySummaryOneLiner: "One-Liner",
          copySummaryOtherServices: "Other Services",
          placeholderExample: "e.g. 10000000",
          resultBarListEmpty: "Allocations will be shown after calculation.",
          resultBarListNoItems: "No items to display.",
          currencySymbol: "$ ",
          riskDescPrefix: "Current risk asset ratio is {pct}%. {msg}",
        },
      };

      const defaultLang = "ko";
      const supportedLangs = ["ko", "en"];
      let currentLang = defaultLang;

      function t(key, vars = {}) {
        const langTable = translations[currentLang] || translations.ko;
        let template = langTable?.[key] ?? translations.ko?.[key] ?? key;
        if (typeof template !== "string") return template;
        Object.keys(vars).forEach((k) => {
          template = template.replace(new RegExp(`\\{${k}\\}`, "g"), vars[k]);
        });
        return template;
      }

      function applyTranslations() {
        document.title = t("metaTitle");
        const descMeta = document.querySelector('meta[name="description"]');
        if (descMeta) descMeta.setAttribute("content", t("metaDescription"));
        const ogDescMeta = document.querySelector('meta[property="og:description"]');
        if (ogDescMeta) ogDescMeta.setAttribute("content", t("metaDescription"));
        document.querySelectorAll("[data-i18n-content]").forEach((el) => {
          el.setAttribute("content", t(el.dataset.i18nContent));
        });
        document.documentElement.lang = currentLang;
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          el.textContent = t(el.dataset.i18n);
        });
        document.querySelectorAll("[data-i18n-html]").forEach((el) => {
          el.innerHTML = t(el.dataset.i18nHtml);
        });
        document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
          el.placeholder = t(el.dataset.i18nPlaceholder);
        });
        document.querySelectorAll("[data-i18n-title]").forEach((el) => {
          if (el.tagName === "TITLE") {
            el.textContent = t(el.dataset.i18nTitle);
          } else {
            el.setAttribute("title", t(el.dataset.i18nTitle));
          }
        });
      }

      function detectLang() {
        const params = new URLSearchParams(window.location.search);
        const paramLang = params.get("lang");
        if (supportedLangs.includes(paramLang)) return paramLang;
        const stored = localStorage.getItem("preferredLang");
        if (supportedLangs.includes(stored)) return stored;
        const browserLang =
          navigator.languages && navigator.languages.length
            ? navigator.languages[0]
            : navigator.language;
        if (browserLang && browserLang.toLowerCase().startsWith("ko")) {
          return "ko";
        }
        return defaultLang;
      }

      function setLang(lang, options = {}) {
        const nextLang = supportedLangs.includes(lang) ? lang : defaultLang;
        currentLang = nextLang;
        window.currentLang = currentLang;
        document.documentElement.lang = nextLang;
        localStorage.setItem("preferredLang", nextLang);
        document.querySelectorAll(".lang-switch button").forEach((button) => {
          button.classList.toggle("active", button.dataset.lang === nextLang);
        });
        applyTranslations();
        if (options.forceUpdate && typeof window.render === "function") {
          window.render();
        }
        if (options.updateUrl) {
          const url = new URL(window.location.href);
          url.searchParams.set("lang", nextLang);
          window.history.replaceState({}, "", url);
        }
      }

      document.querySelectorAll(".lang-switch button").forEach((button) => {
        button.addEventListener("click", () => {
          setLang(button.dataset.lang, { updateUrl: true, forceUpdate: true });
        });
      });

      setLang(detectLang(), { updateUrl: false, forceUpdate: false });

      // Make t() function and currentLang globally available
      window.t = t;
      window.currentLang = currentLang;
      window.setLang = setLang;

      // =========================
      // ---------- Helpers ----------
      const fmt = (n) => {
        if (!isFinite(n)) return "â€”";
        // KRW ìŠ¤íƒ€ì¼ë¡œ ë³´ê¸° ì¢‹ê²Œ
        return new Intl.NumberFormat("ko-KR").format(Math.round(n));
      };
      const pct = (x) => (isFinite(x) ? (x * 100).toFixed(1) + "%" : "â€”");
      const clamp = (v, a, b) => Math.min(b, Math.max(a, v));

      const toast = (msg) => {
        const el = document.getElementById("toast");
        const t = window.t || ((key, vars = {}) => key);
        el.textContent = typeof msg === "string" && msg.startsWith("toast") ? t(msg) : msg;
        el.classList.add("show");
        setTimeout(() => el.classList.remove("show"), 1200);
      };

      const getNum = (id) => {
        const v = Number(document.getElementById(id).value || 0);
        return isFinite(v) && v > 0 ? v : 0;
      };

      function getAssets() {
        const tFunc = window.t || ((key) => key);
        return [
          { key: "cash", label: tFunc("assetCash").replace("ğŸ’° ", ""), icon: "ğŸ’°" },
          { key: "gold", label: tFunc("assetGold").replace("ğŸª™ ", ""), icon: "ğŸª™" },
          { key: "realestate", label: tFunc("assetRealestate").replace("ğŸ  ", ""), icon: "ğŸ " },
          { key: "stocks", label: tFunc("assetStocks").replace("ğŸ“ˆ ", ""), icon: "ğŸ“ˆ" },
          { key: "crypto", label: tFunc("assetCrypto").replace("ğŸš€ ", ""), icon: "ğŸš€" },
          { key: "bonds", label: tFunc("assetBonds").replace("ğŸ›¡ï¸ ", ""), icon: "ğŸ›¡ï¸" },
          { key: "other", label: tFunc("assetOther").replace("ğŸ§© ", ""), icon: "ğŸ§©" },
        ];
      }

      // ---------- Core diagnosis rules ----------
      function portfolioType(riskRatio) {
        const tFunc = window.t || ((key) => key);
        const isKo = currentLang === "ko";
        // riskRatio: 0~1
        if (riskRatio < 0.25)
          return {
            icon: "ğŸ›¡ï¸",
            name: isKo ? "ì•ˆì •í˜•" : "Conservative",
            hint: isKo ? "ë³€ë™ì„±ë³´ë‹¤ ì•ˆì •ì´ ìš°ì„ ì¸ êµ¬ì¡°" : "Structure prioritizing stability over volatility",
          };
        if (riskRatio < 0.6)
          return {
            icon: "âš–ï¸",
            name: isKo ? "ê· í˜•í˜•" : "Balanced",
            hint: isKo ? "ì„±ì¥ê³¼ ì•ˆì •ì´ ì„ì¸ êµ¬ì¡°" : "Structure mixing growth and stability",
          };
        if (riskRatio < 0.85)
          return { 
            icon: "ğŸš€", 
            name: isKo ? "ê³µê²©í˜•" : "Aggressive", 
            hint: isKo ? "ì„±ì¥ì„ ìš°ì„ í•˜ëŠ” êµ¬ì¡°" : "Structure prioritizing growth" 
          };
        return {
          icon: "ğŸŒªï¸",
          name: isKo ? "ê³ ë³€ë™ ì§‘ì¤‘í˜•" : "High Volatility",
          hint: isKo ? "ìˆ˜ìµê³¼ ë³€ë™ì„±ì´ í•¨ê»˜ í° êµ¬ì¡°" : "Structure with high returns and volatility",
        };
      }

      function liquidityStatus(cashRatio) {
        const isKo = currentLang === "ko";
        // cashRatio: 0~1
        if (cashRatio < 0.05)
          return {
            big: isKo ? "ë‚®ì€ í¸" : "Low",
            desc: isKo ? "í˜„ê¸ˆì´ ì ì€ í¸ì´ì—ìš”. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ìƒí™©ì´ë‚˜ ê¸°íšŒ ëŒ€ì‘ì´ ë¶ˆí¸í•  ìˆ˜ ìˆì–´ìš”." : "Cash is relatively low. May be inconvenient for sudden situations or opportunity responses.",
          };
        if (cashRatio < 0.2)
          return {
            big: isKo ? "ë³´í†µ ìˆ˜ì¤€" : "Moderate",
            desc: isKo ? "ì¼ìƒê³¼ íˆ¬ì ëª¨ë‘ ë¬´ë‚œí•œ ìˆ˜ì¤€ì´ì—ìš”. í•„ìš”í•˜ë©´ ì¡°ê¸ˆì”© ì¡°ì •í•´ë„ ì¢‹ì•„ìš”." : "Comfortable level for daily life and investment. Can adjust slightly if needed.",
          };
        if (cashRatio < 0.5)
          return {
            big: isKo ? "ì—¬ìœ  ìˆëŠ” í¸" : "Comfortable",
            desc: isKo ? "ì•ˆì •ê°ì´ ì¢‹ì•„ìš”. ë‹¤ë§Œ ë„ˆë¬´ ê³¼í•˜ë©´ ì„±ì¥ ì†ë„ëŠ” ëŠë ¤ì§ˆ ìˆ˜ ìˆì–´ìš”." : "Good stability. However, too much may slow growth rate.",
          };
        return {
          big: isKo ? "ë§¤ìš° ë†’ì€ í¸" : "Very High",
          desc: isKo ? "ì•ˆì •ê°ì€ í¬ì§€ë§Œ, ìì‚°ì´ ì¼í•˜ì§€ ì•ŠëŠ” êµ¬ê°„ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”." : "High stability, but assets may sit idle for longer periods.",
        };
      }

      function concentration(top) {
        const isKo = currentLang === "ko";
        // top: {label, ratio}
        if (!top) return { big: "â€”", desc: "â€”" };
        const r = top.ratio;
        if (r >= 0.5)
          return {
            big: isKo 
              ? `${top.label} ë¹„ì¤‘ì´ ê°€ì¥ í½ë‹ˆë‹¤ (${(r * 100).toFixed(1)}%)`
              : `${top.label} is largest (${(r * 100).toFixed(1)}%)`,
            desc: isKo 
              ? "í•œ ìì‚°ì— ë¹„ì¤‘ì´ í° êµ¬ì¡°ì˜ˆìš”. ì¥ì ë„ í¬ì§€ë§Œ, ì˜ˆìƒ ë°– ìƒí™©ì—ì„  ë¶ˆí¸í•¨ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”."
              : "Structure with large allocation to one asset. Advantages are big, but unexpected situations can cause discomfort.",
          };
        if (r >= 0.35)
          return {
            big: isKo
              ? `${top.label} ë¹„ì¤‘ì´ ê°€ì¥ í½ë‹ˆë‹¤ (${(r * 100).toFixed(1)}%)`
              : `${top.label} is largest (${(r * 100).toFixed(1)}%)`,
            desc: isKo
              ? "íŠ¹ì • ìì‚°ì— í˜ì´ ì‹¤ë¦° í¸ì´ì—ìš”. ìœ ì§€í•´ë„ ì¢‹ê³ , ë¶€ë‹´ë˜ë©´ ë¶„ì‚°ì„ ê³ ë ¤í•´ë³¼ ë§Œí•´ìš”."
              : "Relatively concentrated on a specific asset. Can maintain, or consider diversification if concerned.",
          };
        return {
          big: isKo
            ? `${top.label} ë¹„ì¤‘ì´ ê°€ì¥ í½ë‹ˆë‹¤ (${(r * 100).toFixed(1)}%)`
            : `${top.label} is largest (${(r * 100).toFixed(1)}%)`,
          desc: isKo
            ? "ìì‚°ì´ ë¹„êµì  ê³ ë¥´ê²Œ ë¶„ì‚°ë˜ì–´ ìˆì–´ìš”. í° ì ë¦¼ì€ ì ì€ í¸ì…ë‹ˆë‹¤."
            : "Assets are relatively evenly distributed. Large concentration is minimal.",
        };
      }

      function oneLinerBy(typeName, cashRatio, top) {
        const isKo = currentLang === "ko";
        const topLabel = top?.label || (isKo ? "íŠ¹ì • ìì‚°" : "specific asset");
        const conservative = isKo ? "ì•ˆì •í˜•" : "Conservative";
        const balanced = isKo ? "ê· í˜•í˜•" : "Balanced";
        const aggressive = isKo ? "ê³µê²©í˜•" : "Aggressive";
        
        if (typeName === conservative || typeName === "Conservative") {
          if (cashRatio < 0.1)
            return isKo 
              ? "ì „ì²´ì ìœ¼ë¡œ ì•ˆì • ì¤‘ì‹¬ì´ì—ìš”. ë‹¤ë§Œ í˜„ê¸ˆ ì—¬ìœ ê°€ ì–‡ìœ¼ë©´ ë§ˆìŒì´ í”ë“¤ë¦´ ìˆ˜ ìˆì–´ìš”."
              : "Overall conservative focus. However, thin cash reserves may cause emotional volatility.";
          return isKo
            ? "ì•ˆì •ê°ì´ ê°•í•œ êµ¬ì¡°ì˜ˆìš”. í° ì‹¤ìˆ˜ ê°€ëŠ¥ì„±ì€ ë‚®ì€ í¸ì…ë‹ˆë‹¤."
            : "Strong stable structure. Low probability of major mistakes.";
        }
        if (typeName === balanced || typeName === "Balanced") {
          if (cashRatio < 0.05)
            return isKo
              ? "ê· í˜•ì€ ì¢‹ì€ë° í¬ì…˜(í˜„ê¸ˆ)ì´ ë¶€ì¡±í•´ ë³´ì—¬ìš”. ì‘ì€ ë³´ê°•ë§Œ í•´ë„ í¸í•´ì§ˆ ìˆ˜ ìˆì–´ìš”."
              : "Balance is good but cash reserves seem low. A small boost can help.";
          if (top && top.ratio >= 0.5)
            return isKo
              ? `ê· í˜• ì†ì—ì„œë„ ${topLabel} ì ë¦¼ì´ ì»¤ìš”. ì¥ì ì€ í¬ê³ , ë‹¨ì ë„ ë¶„ëª…í•´ìš”.`
              : `Even within balance, ${topLabel} concentration is high. Advantages are big, disadvantages are clear.`;
          return isKo
            ? "ì„±ì¥ê³¼ ì•ˆì •ì´ ì ì ˆíˆ ì„ì¸ êµ¬ì¡°ì˜ˆìš”. ìœ ì§€í•˜ë©´ì„œ ë¯¸ì„¸ ì¡°ì •í•˜ê¸° ì¢‹ì€ ìƒíƒœì…ë‹ˆë‹¤."
            : "Well-mixed structure of growth and stability. Good state for maintaining and fine-tuning.";
        }
        if (typeName === aggressive || typeName === "Aggressive") {
          if (cashRatio < 0.05)
            return isKo
              ? "ì„±ì¥ ì¤‘ì‹¬ì´ì—ìš”. ìˆ˜ìµ ê¸°íšŒëŠ” í¬ì§€ë§Œ, í˜„ê¸ˆì´ ì–‡ìœ¼ë©´ ì²´ê° ë³€ë™ì„±ì´ ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”."
              : "Growth-focused. Profit opportunities are big, but thin cash may increase perceived volatility.";
          return isKo
            ? "ì„±ì¥ ì†ë„ê°€ ë¹ ë¥¼ ìˆ˜ ìˆëŠ” êµ¬ì¡°ì˜ˆìš”. í”ë“¤ë¦´ ë•Œë¥¼ ëŒ€ë¹„í•œ ê·œì¹™ì´ ìˆìœ¼ë©´ ë” ì¢‹ì•„ìš”."
            : "Structure that can grow quickly. Having rules for volatility helps.";
        }
        // High volatility
        if (cashRatio < 0.08)
          return isKo
            ? "ë³€ë™ì„±ì´ í¬ê²Œ ì²´ê°ë  ìˆ˜ ìˆì–´ìš”. í˜„ê¸ˆ ë²„í¼ì™€ ì›ì¹™ì´ í¬íŠ¸í´ë¦¬ì˜¤ì˜ ì•ˆì „ë²¨íŠ¸ê°€ ë©ë‹ˆë‹¤."
            : "Volatility can be felt strongly. Cash buffer and principles are the portfolio's safety belt.";
        return isKo
          ? "ìˆ˜ìµë„ ë³€ë™ì„±ë„ í° ì¡°í•©ì´ì—ìš”. 'ê¸°ì¤€'ì„ ì„¸ì›Œë‘ë©´ ë©˜íƒˆ ì†Œëª¨ê°€ ì¤„ì–´ë“¤ ìˆ˜ ìˆì–´ìš”."
          : "Combination with high returns and volatility. Setting 'benchmarks' can reduce mental drain.";
      }

      function oneAction(typeName, cashRatio, riskRatio, top) {
        const isKo = currentLang === "ko";
        const conservative = isKo ? "ì•ˆì •í˜•" : "Conservative";
        
        // ì¶”ì²œ í–‰ë™ì€ "ë”± 1ê°œ"
        if (cashRatio < 0.05)
          return isKo
            ? "í˜„ê¸ˆ ë¹„ì¤‘ì„ 5%pë§Œ ì˜¬ë ¤ë„ 'ê¸‰í•  ë•Œ'ì™€ 'ê¸°íšŒê°€ ì˜¬ ë•Œ' ëŒ€ì‘ì´ í›¨ì”¬ ì‰¬ì›Œì§ˆ ìˆ˜ ìˆì–´ìš”."
            : "Just raising cash ratio by 5%p can make it much easier to respond to urgent situations and opportunities.";
        if (top && top.ratio >= 0.5)
          return isKo
            ? "í•œ ìì‚° ë¹„ì¤‘ì´ í° í¸ì´ë¼, ëª©í‘œ ë¹„ì¤‘(ì˜ˆ: 50% â†’ 45%)ì²˜ëŸ¼ 'ìƒí•œì„ ' í•œ ì¤„ë§Œ ì •í•´ë‘ë©´ í¸í•´ìš”."
            : "Since one asset has a large ratio, setting a 'ceiling' target ratio (e.g., 50% â†’ 45%) can help.";
        if (riskRatio >= 0.85)
          return isKo
            ? "ë¦¬ë°¸ëŸ°ì‹± ê¸°ì¤€ì„ í•˜ë‚˜ë§Œ ì •í•´ë³´ì„¸ìš”. ì˜ˆ: ìœ„í—˜ìì‚° ë¹„ì¤‘ì´ ëª©í‘œì—ì„œ Â±5% ë²—ì–´ë‚˜ë©´ ì¡°ì •."
            : "Set one rebalancing rule. For example: adjust when risk asset ratio deviates Â±5% from target.";
        if (typeName === conservative || typeName === "Conservative")
          return isKo
            ? "ì„±ì¥ ì†ë„ê°€ ì•„ì‰½ë‹¤ë©´ 'ì•„ì£¼ ì‘ì€ ì„±ì¥ ë¹„ì¤‘'(ì˜ˆ: ì£¼ì‹ 5%p ì¶”ê°€)ì²˜ëŸ¼ ë¶€ë‹´ ë‚®ì€ ì‹¤í—˜ë¶€í„° í•´ë³´ëŠ” ê²ƒë„ ë°©ë²•ì´ì—ìš”."
            : "If growth feels slow, starting with low-burden experiments like 'very small growth allocation' (e.g., add 5%p stocks) can help.";
        return isKo
          ? "ì§€ê¸ˆ êµ¬ì¡°ëŠ” ë¬´ë‚œí•´ìš”. ë‹¤ìŒ ë‹¨ê³„ëŠ” 'ë‚´ê°€ ë²„í‹¸ ìˆ˜ ìˆëŠ” ë‚™í­'ì„ ë¬¸ì¥ìœ¼ë¡œ ì ì–´ë‘ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë„ì›€ì´ ë©ë‹ˆë‹¤."
          : "Current structure is fine. Next step: just writing down 'the drop I can handle' in words helps.";
      }

      // ---------- UI rendering ----------
      function render() {
        const tFunc = window.t || ((key) => key);
        const ASSETS = getAssets();
        const values = {};
        ASSETS.forEach((a) => (values[a.key] = getNum(a.key)));

        const total = Object.values(values).reduce((s, v) => s + v, 0);

        // Guard
        if (total <= 0) {
          document.getElementById("totalText").textContent = "â€”";
          document.getElementById("typeIcon").textContent = "ğŸ§¾";
          document.getElementById("typeName").textContent = tFunc("resultNoInput");
          document.getElementById("typeHint").textContent = tFunc("resultNoInputHint");
          document.getElementById("assetCards").innerHTML = "";
          const isKo = currentLang === "ko";
          const tFunc = window.t || ((key) => key);
          document.getElementById(
            "barList"
          ).innerHTML = `<div style="color:var(--muted);font-size:12px;">${tFunc("resultBarListEmpty")}</div>`;
          document.getElementById("riskPctText").textContent = "â€”";
          document.getElementById("liqText").textContent = "â€”";
          document.getElementById("concText").textContent = "â€”";
          document.getElementById("oneLiner").textContent = "â€”";
          document.getElementById("oneAction").textContent = "â€”";
          return;
        }

        const ratios = {};
        ASSETS.forEach((a) => (ratios[a.key] = values[a.key] / total));

        // Risk assets: stocks + crypto (+ realestate option)
        const includeReAsRisk = document.getElementById("optReAsRisk").checked;
        const riskValue =
          values.stocks +
          values.crypto +
          (includeReAsRisk ? values.realestate : 0);
        const riskRatio = riskValue / total;

        // Liquidity: cash only for simple rule
        const cashRatio = ratios.cash;

        // Concentration: top asset (ignore zero)
        const nonZero = ASSETS.map((a) => ({
          ...a,
          value: values[a.key],
          ratio: ratios[a.key],
        }))
          .filter((x) => x.value > 0)
          .sort((a, b) => b.ratio - a.ratio);
        const top = nonZero[0]
          ? { label: nonZero[0].label, ratio: nonZero[0].ratio }
          : null;

        // Type
        const typeInfo = portfolioType(riskRatio);

        // Update KPI
        const tFunc = window.t || ((key) => key);
        const currency = tFunc("currencySymbol");
        document.getElementById("totalText").textContent = currency + fmt(total);
        document.getElementById("typeIcon").textContent = typeInfo.icon;
        document.getElementById("typeName").textContent = typeInfo.name;
        document.getElementById("typeHint").textContent = typeInfo.hint;

        // Asset cards (sort by ratio desc, show only >0)
        const assetCards = nonZero
          .map((a) => {
            return `
          <div class="asset">
            <div class="t">
              <div class="name">${a.icon} ${a.label}</div>
              <div class="pct">${(a.ratio * 100).toFixed(1)}%</div>
            </div>
            <div class="amt">${currency}${fmt(a.value)}</div>
          </div>
        `;
          })
          .join("");
        document.getElementById("assetCards").innerHTML = assetCards;

        // Bar list
        const bars = nonZero
          .slice(0, 6)
          .map((a) => {
            const w = clamp(a.ratio * 100, 0, 100);
            return `
        <div class="bar">
          <div>${a.icon} ${a.label}</div>
          <div class="track"><div class="fill" data-w="${w}"></div></div>
          <div style="text-align:right">${w.toFixed(1)}%</div>
        </div>
      `;
          })
          .join("");
        const tFunc = window.t || ((key) => key);
        document.getElementById("barList").innerHTML =
          bars ||
          `<div style="color:var(--muted);font-size:12px;">${tFunc("resultBarListNoItems")}</div>`;
        // animate fills
        requestAnimationFrame(() => {
          document
            .querySelectorAll(".fill")
            .forEach((el) => (el.style.width = el.dataset.w + "%"));
        });

        // Diagnostics
        const isKo = currentLang === "ko";
        document.getElementById("riskPctText").textContent =
          (riskRatio * 100).toFixed(1) + "%";
        const riskMsg = isKo
          ? riskRatio < 0.25
            ? "ë³€ë™ì„±ë³´ë‹¤ ì•ˆì •ì´ ìš°ì„ ì¸ êµ¬ê°„ì´ì—ìš”."
            : riskRatio < 0.6
            ? "ì„±ì¥ê³¼ ì•ˆì •ì´ í•¨ê»˜ ì„ì¸ êµ¬ê°„ì´ì—ìš”."
            : riskRatio < 0.85
            ? "ì„±ì¥ì— ë¬´ê²Œê°€ ì‹¤ë¦° ìƒíƒœì˜ˆìš”. í”ë“¤ë¦¼ë„ ì²´ê°ë  ìˆ˜ ìˆì–´ìš”."
            : "ê³ ë³€ë™ êµ¬ê°„ì´ì—ìš”. ê·œì¹™(ìƒí•œ/í•˜í•œ)ì´ ìˆìœ¼ë©´ í›¨ì”¬ í¸í•´ì§ˆ ìˆ˜ ìˆì–´ìš”."
          : riskRatio < 0.25
          ? "Zone prioritizing stability over volatility."
          : riskRatio < 0.6
          ? "Zone mixing growth and stability."
          : riskRatio < 0.85
          ? "State with weight on growth. Volatility can be felt."
          : "High volatility zone. Having rules (upper/lower limits) helps.";
        const tFunc = window.t || ((key, vars) => key);
        const riskPct = (riskRatio * 100).toFixed(1);
        document.getElementById("riskDesc").textContent = tFunc("riskDescPrefix", { pct: riskPct, msg: riskMsg });

        const liq = liquidityStatus(cashRatio);
        document.getElementById("liqText").textContent =
          liq.big + ` (${(cashRatio * 100).toFixed(1)}%)`;
        document.getElementById("liqDesc").textContent = liq.desc;

        const conc = concentration(top);
        document.getElementById("concText").textContent = conc.big;
        document.getElementById("concDesc").textContent = conc.desc;

        // One-liner + One action
        document.getElementById("oneLiner").textContent = oneLinerBy(
          typeInfo.name,
          cashRatio,
          top
        );
        document.getElementById("oneAction").textContent = oneAction(
          typeInfo.name,
          cashRatio,
          riskRatio,
          top
        );

        // Optional: URL share params (be careful with sensitive data)
        const shareUrl = document.getElementById("optShareUrl").checked;
        if (shareUrl) {
          const params = new URLSearchParams({
            cash: String(values.cash),
            gold: String(values.gold),
            re: String(values.realestate),
            st: String(values.stocks),
            cr: String(values.crypto),
            bd: String(values.bonds),
            ot: String(values.other),
            reRisk: includeReAsRisk ? "1" : "0",
          });
          history.replaceState(
            null,
            "",
            `${location.pathname}?${params.toString()}`
          );
        } else {
          history.replaceState(null, "", `${location.pathname}`);
        }
      }

      // Expose render function globally for language switching
      window.render = render;

      function resetAll() {
        [
          "cash",
          "gold",
          "realestate",
          "stocks",
          "crypto",
          "bonds",
          "other",
        ].forEach((id) => {
          document.getElementById(id).value = "";
        });
        document.getElementById("optReAsRisk").checked = false;
        document.getElementById("optShareUrl").checked = false;
        history.replaceState(null, "", `${location.pathname}`);
        render();
        toast("toastReset");
      }

      async function copySummary() {
        const tFunc = window.t || ((key) => key);
        const totalText = document.getElementById("totalText").textContent;
        const typeName = document.getElementById("typeName").textContent;
        const riskPctText = document.getElementById("riskPctText").textContent;
        const liqText = document.getElementById("liqText").textContent;
        const concText = document.getElementById("concText").textContent;
        const oneLiner = document.getElementById("oneLiner").textContent;

        const lines = [
          tFunc("copySummaryTitle"),
          `${tFunc("copySummaryTotal")}: ${totalText}`,
          `${tFunc("copySummaryType")}: ${typeName}`,
          `${tFunc("copySummaryRisk")}: ${riskPctText}`,
          `${tFunc("copySummaryLiquidity")}: ${liqText}`,
          `${tFunc("copySummaryConcentration")}: ${concText}`,
          `${tFunc("copySummaryOneLiner")}: ${oneLiner}`,
          ``,
          `${tFunc("copySummaryOtherServices")}: https://funnyfunny.cloud`,
        ].join("\n");

        try {
          await navigator.clipboard.writeText(lines);
          toast("toastCopySummary");
        } catch (e) {
          // fallback
          const ta = document.createElement("textarea");
          ta.value = lines;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          toast("toastCopy");
        }
      }

      // ---------- Wire up ----------
      document.getElementById("btnCalc").addEventListener("click", render);
      document.getElementById("btnReset").addEventListener("click", resetAll);
      document
        .getElementById("btnShare")
        .addEventListener("click", copySummary);

      // Auto-calc on Enter
      document.querySelectorAll("input[type='number']").forEach((inp) => {
        inp.addEventListener("keydown", (e) => {
          if (e.key === "Enter") render();
        });
      });

      // Load from URL params if present (only when optShareUrl is used)
      (function initFromUrl() {
        const p = new URLSearchParams(location.search);
        if ([...p.keys()].length === 0) {
          render();
          return;
        }

        const map = {
          cash: "cash",
          gold: "gold",
          re: "realestate",
          st: "stocks",
          cr: "crypto",
          bd: "bonds",
          ot: "other",
        };
        let hasAny = false;
        for (const [k, id] of Object.entries(map)) {
          if (p.has(k)) {
            document.getElementById(id).value = p.get(k) || "";
            hasAny = true;
          }
        }
        if (p.get("reRisk") === "1")
          document.getElementById("optReAsRisk").checked = true;
        if (hasAny) {
          // ê³µìœ ë¡œ ë“¤ì–´ì˜¨ ê²½ìš°ëŠ” ë¯¼ê°í•˜ë‹ˆ ì‚¬ìš©ìê°€ ì›í•  ë•Œë§Œ URL ìœ ì§€í•˜ë„ë¡ optëŠ” êº¼ë‘”ë‹¤
          document.getElementById("optShareUrl").checked = false;
        }
        render();
      })();
    </script>
  </body>
</html>
